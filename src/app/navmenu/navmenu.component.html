<nav [class.hidden]="!isVisible">
  <!-- SVG Goo filter for slime effect -->
  <svg width="0" height="0" class="sr-abs">
    <defs>
      <filter id="goo">
        <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur" />
        <feColorMatrix in="blur" mode="matrix"
          values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
        <feBlend in="SourceGraphic" in2="goo" />
      </filter>
    </defs>
  </svg>


<div class="nav-menu">
  <!-- about -->
  <!-- <div class="about">
    <a class="bg_links social whatsapp" href="wa.me/message/GLVXCNM7IBKUI1" target="_blank">
      <span class="icon"></span>
    </a>
    <a class="bg_links social Instagram" href="https://www.instagram.com/farmaformulapet/" target="_blank">
      <span class="icon"></span>
    </a>
    <a class="bg_links social linkedin" href="https://www.linkedin.com/in/rafaelalucas/" target="_blank">
      <span class="icon"></span>
    </a>
    <a class="bg_links logo"></a>
    
  </div> -->
  <!-- end about -->
  
  
  <nav>
    <div *ngIf="menuOpen" class="nav-overlay" (click)="closeMenu()" aria-hidden="true"></div>
    <div class="menubar">
<a href="#0" class="home">
  <div class="logo-container">
    <div id="wrapper">
      <div id="ball"></div>
    </div>
    <img src="/imagens/image.png" alt="Logo" class="imagem-navbar">
  </div>
</a>



      <div class="icons">
        <div class="secondary-icons">
          <div class="icon-wrap">
            <a [routerLink]="'/mapa'" title="Abrir Mapa" aria-label="Abrir Mapa">
              <i class="icon-second" [class.active]="currentRoute.startsWith('/mapa')">
                <img src="/icones/mapa-pata.png" class="icones-menu" width="24" height="24" alt="Mapa">
              </i>
            </a>
          </div>
          <div class="icon-wrap">
            <a [routerLink]="'/galeria'" title="Galeria de pets" aria-label="Abrir Galeria de Pets">
              <i class="icon-second" [class.active]="currentRoute.startsWith('/galeria')">
                <img *ngIf="!useGaleriaSvg" src="/icones/galeria-pet.png" class="icones-menu" width="20" height="20" alt="Galeria" (error)="useGaleriaSvg = true">
                <svg *ngIf="useGaleriaSvg" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                  <path d="M12 13.5C13.933 13.5 15.5 11.933 15.5 10C15.5 8.067 13.933 6.5 12 6.5C10.067 6.5 8.5 8.067 8.5 10C8.5 11.933 10.067 13.5 12 13.5Z" fill="#111827"/>
                  <path d="M6.5 14.5C7.328 14.5 8 15.172 8 16C8 16.828 7.328 17.5 6.5 17.5C5.672 17.5 5 16.828 5 16C5 15.172 5.672 14.5 6.5 14.5Z" fill="#111827"/>
                  <path d="M17.5 14.5C18.328 14.5 19 15.172 19 16C19 16.828 18.328 17.5 17.5 17.5C16.672 17.5 16 16.828 16 16C16 15.172 16.672 14.5 17.5 14.5Z" fill="#111827"/>
                  <path d="M9 18.5C9.552 19.771 10.7 20.7 12 20.7C13.3 20.7 14.448 19.771 15 18.5H9Z" fill="#111827"/>
                </svg>
              </i>
            </a>
          </div>
          <div class="icon-wrap">
            <a [routerLink]="'/loja'" title="Ir para a loja" aria-label="Ir para a loja">
              <i class="icon-second" [class.active]="currentRoute.startsWith('/loja')">
                <img src="/icones/loja.png" class="icones-menu" width="22" height="22" alt="Loja">
              </i>
            </a>
          </div>
          <div class="icon-wrap" *ngIf="isCliente">
            <a [routerLink]="'/carrinho'" class="cart-link" title="Ir para o carrinho" aria-label="Ir para o carrinho">
              <i class="icon-second" [class.active]="currentRoute.startsWith('/carrinho')">
                <img src="/icones/carrinho.png" class="icones-menu" width="30" height="30" alt="Carrinho">
              </i>
              <span class="cart-badge" *ngIf="cartCount > 0" aria-label="Itens no carrinho">{{ cartCount }}</span>
            </a>
          </div>
        </div>
  <i class="icon-menu" *ngIf="showFullMenu"><span></span></i>
  <button *ngIf="!showFullMenu" #userBtn class="user-trigger" (click)="abrirClienteModal()" title="√Årea do cliente" aria-label="Abrir √°rea do cliente">
    <ng-container *ngIf="userFoto; else defaultUserIcon">
      <img [src]="userFoto" alt="Foto do usu√°rio" />
    </ng-container>
    <ng-template #defaultUserIcon>
      <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><circle cx="12" cy="8" r="4" fill="#111827"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6" fill="#111827"/></svg>
    </ng-template>
  </button>
      </div>
    </div>
  <ul class="menu" *ngIf="showFullMenu">
      
    <li class="menu-link">
      <a [routerLink]="currentRoute === '/' ? '/sobre-nos' : '/'" class="text-item">
        {{ currentRoute === '/' ? 'Sobre N√≥s' : 'Home' }}
      </a>
    </li>

      <!-- Hidden example submenu kept for reference -->
      <li class="menu-link sub" *ngIf="false">
        <a href="#0" class="text-item">Exemplo de Submenu<span class="icon"></span></a>
        <ul class="submenu">
          <li class="sub-item"><a href="#0">Item A</a></li>
          <li class="sub-item"><a href="#0">Item B</a></li>
          <li class="sub-item"><a href="#0">Item C</a></li>
        </ul>
      </li>
      <li class="menu-link"><a [routerLink]="'/area-vet'" class="text-item">√Årea vet üêæ</a></li>
      <li class="menu-link"><a [routerLink]="'/loja'" class="text-item">Loja</a></li>
      <li class="menu-link">
        <a href="https://www.instagram.com/farmaformulapet/" target="_blank" rel="noopener" class="text-item insta-btn" title="Instagram">
          <img src="/imagens/icons8-instagram-500.png" alt="Instagram" width="36" height="36" />
        </a>
      </li>
  <!-- Galeria moved to top bar -->

    </ul>
  </nav>
</div>
</nav>

<!-- Modal de √Årea do Cliente (renderiza o componente como modal) -->
<ng-container *ngIf="showClienteModal">
  <div class="cliente-overlay" (click)="fecharClienteModal()" aria-hidden="true"></div>
  <div class="cliente-modal" (click)="$event.stopPropagation()">
    <div class="cliente-modal-inner">
      <div class="cliente-loader" *ngIf="clienteLoading" aria-live="polite" aria-busy="true">
        <div class="spinner"></div>
        <div class="loader-text">Carregando √°rea do cliente‚Ä¶</div>
      </div>
      <ng-template #clienteHost></ng-template>
      <div class="edge-fade" aria-hidden="true"></div>
    </div>
  </div>
  <button class="cliente-close" (click)="fecharClienteModal()" aria-label="Fechar">‚úï</button>
</ng-container>