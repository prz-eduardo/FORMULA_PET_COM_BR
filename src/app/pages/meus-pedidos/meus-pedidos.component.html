<app-navmenu *ngIf="!modal"></app-navmenu>

<div class="area-like-wrapper">
  <main class="container">
    <div class="top-actions" *ngIf="!modal">
      <button class="btn-back" (click)="voltar()">← Voltar</button>
    </div>
  <h1 class="titulo" *ngIf="!modal">Meus Pedidos</h1>
    <div class="searchbar">
      <input type="text" placeholder="Buscar por código (ex: FP-12345)" [(ngModel)]="buscaCodigo" (keyup.enter)="consultarPorCodigo()" />
      <button class="btn" (click)="consultarPorCodigo()">Consultar</button>
    </div>

    <section class="order-list" *ngIf="pedidos.length; else vazio">
      <article class="order-card" *ngFor="let p of pedidos">
        <header class="order-head">
          <div class="left">
            <div class="codigo">{{ p.codigo }}</div>
            <div class="badge" [ngClass]="p.statusKey">{{ p.status }}</div>
          </div>
          <div class="right">
            <div class="datas">
              <div><span class="label">Criado</span> <span class="value">{{ p.criadoEm | date:'short' }}</span></div>
              <div><span class="label">Atualizado</span> <span class="value">{{ p.atualizadoEm | date:'short' }}</span></div>
            </div>
            <button class="btn" (click)="abrirStatus(p.codigo)">Ver status</button>
          </div>
        </header>

      </article>
    </section>

    <ng-template #vazio>
      <div class="vazio">Você ainda não possui pedidos.</div>
    </ng-template>
  </main>
</div>

<!-- Named outlet para abrir o modal de status -->
<router-outlet name="modal"></router-outlet>
