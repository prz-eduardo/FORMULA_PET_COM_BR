<div class="area-vet-wrapper">
  <h1 class="titulo">√Årea Veterin√°ria üêæ</h1>

  <!-- Login / Criar Conta -->
  <div *ngIf="!isLoggedIn" class="card login-card">
    <h2>Bem-vindo(a) Veterin√°rio(a)</h2>
    <p>Fa√ßa login ou crie sua conta para acessar os recursos.</p>
    <div class="acoes">
      <button class="btn" (click)="abrirModalLogin()">Login</button>
      <button class="btn btn-sec" (click)="abrirModalCadastro()">Criar Conta</button>
    </div>
  </div>

  <!-- Painel do Vet -->
  <div *ngIf="isLoggedIn" class="vet-panel">
    <div class="vet-info">
      <img *ngIf="vetData?.photoURL" [src]="vetData.photoURL" class="vet-photo" />
      <span class="vet-nome">{{ vetData?.nome }}</span>
      <div class="vet-actions">
        <button class="btn-gear" routerLink="/editar-perfil">
          ‚öôÔ∏è
        </button>
        <button class="btn-logout" (click)="logout()">Logout</button>
      </div>
    </div>
    <p *ngIf="!vetApproved" style="color:red">Aguardando aprova√ß√£o do admin</p>
  </div>

  <div class="menu-wrapper" *ngIf="isLoggedIn" [ngClass]="{'bloqueado': !vetApproved}">
    <div class="menu-cards-wrapper">
      <div class="menu-card" routerLink="/gerar-receita">
        <div class="card-icon">üíä</div>
        <div class="card-title">Gerar Receita</div>
      </div>
      <div class="menu-card" routerLink="/historico-receitas">
        <div class="card-icon">üìú</div>
        <div class="card-title">Hist√≥rico</div>
      </div>
      <div class="menu-card" routerLink="/pacientes">
        <div class="card-icon">üê∂üê±</div>
        <div class="card-title">Pacientes</div>
      </div>
      <div class="menu-card pro" title="Dispon√≠vel apenas no modo PRO">
        <div class="card-icon">üìÖ</div>
        <div class="card-title">Calend√°rio</div>
        <div class="pro-badge">PRO</div>
      </div>
      <div class="menu-card pro" title="Dispon√≠vel apenas no modo PRO">
        <div class="card-icon">üé•</div>
        <div class="card-title">Video Chamada</div>
        <div class="pro-badge">PRO</div>
      </div>
      <div class="menu-card" routerLink="/produtos">
        <div class="card-icon">üè™</div>
        <div class="card-title">Produtos</div>
      </div>
    </div>

    <!-- vidro real -->
    <div *ngIf="!vetApproved" class="overlay-vidro-real"></div>
  </div>

  <!-- Guia de Ativos -->
  <div class="card guia-ativos">
    <div class="top-bar">
      <h2>Guia de Ativos</h2>
      <input
        type="text"
        placeholder="Buscar ativo..."
        [(ngModel)]="filtro"
        (ngModelChange)="onFiltroChange()"
        class="input-busca"
      />

      <div class="view-toggle">
        <button (click)="viewMode='cards'" [class.active]="viewMode==='cards'">Cards</button>
        <button (click)="viewMode='table'" [class.active]="viewMode==='table'">Tabela</button>
      </div>
    </div>

    <!-- CARDS DE ATIVOS -->
    <div *ngIf="viewMode==='cards'">
      <ng-container *ngIf="temAtivos(); else semAtivos">
        <ng-container *ngFor="let letra of alfabetico">
          <ng-container *ngIf="(ativosFiltrados[letra.letra] || []).length > 0">
            <h3 class="indice-letra">{{ letra.letra }}</h3>
            <div class="cards-da-letra">
              <div 
                class="ativo-item" 
                *ngFor="let ativo of ativosFiltrados[letra.letra]; trackBy: trackById"
                (click)="expandirAtivo(ativo)">
                
                <div class="ativo-header">
                  <h4>{{ ativo.nome }}</h4>
                  <span class="chevron" [class.open]="ativo.open">‚ñº</span>
                </div>

                <div class="ativo-details" *ngIf="ativo.open">
                  <p>{{ ativo.descricao }}</p>
                  <p><strong>Dose C√£es:</strong> {{ ativo.doseCaes }}</p>
                  <p><strong>Dose Gatos:</strong> {{ ativo.doseGatos }}</p>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>

      <ng-template #semAtivos>
        <p style="text-align:center; color:red;">Nenhum ativo encontrado ):</p>
      </ng-template>
    </div>

    <!-- TABELA -->
    <div *ngIf="viewMode==='table'" class="tabela-ativos">
      <table>
        <thead>
          <tr>
            <th>√çndice</th>
            <th>Ativo</th>
            <th>Descri√ß√£o</th>
            <th>Dose C√£es</th>
            <th>Dose Gatos</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let letra of alfabetico">
            <tr *ngFor="let ativo of ativosFiltradosPorLetra(letra.letra); trackBy: trackById">
              <td>{{ letra.letra }}</td>
              <td>{{ ativo.nome }}</td>
              <td>{{ ativo.descricao }}</td>
              <td>{{ ativo.doseCaes }}</td>
              <td>{{ ativo.doseGatos }}</td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>

  <!-- MODAIS -->
  <ng-container *ngIf="modalLoginAberto">
    <div class="modal-overlay" (click)="fecharModalLogin()"></div>
    <div class="modal-content"><app-login-vet (close)="fecharModalLogin()" (loggedIn)="onLogin()"></app-login-vet></div>
  </ng-container>

  <ng-container *ngIf="modalCadastroAberto">
    <div class="modal-overlay" (click)="fecharModalCadastro()"></div>
    <div class="modal-content"><app-crie-sua-conta (close)="fecharModalCadastro()"></app-crie-sua-conta></div>
  </ng-container>

  <ng-container *ngIf="modalReferenciasAberto">
    <div class="modal-overlay" (click)="fecharModalReferencias()"></div>
    <div class="modal-content">
      <h2>Refer√™ncias</h2>
        <ul class="referencias">
          <li>ANDRADE, S.F. Manual de Terap√™utica Veterin√°ria. S√£o Paulo: Ed. Roca, 2002.</li>
          <li>√ÅVILA, L. ITV: √çndice Terap√™utico Veterin√°rio. 4 ed. Petr√≥polis, RJ: EPUB, 2010.</li>
          <li>BAGGOT, J. D., et al. Clinical pharmacokinetics of amikacin in dogs. Am J Vet Res. V. 46, n. 8, p.1793-1796, 1985.</li>
          <li>BATISTUZZO, J. A. O; ITAYA, M; ETO, Y. Formul√°rio M√©dico Farmac√™utico. S√£o Paulo: Ed. Pharmabooks, 2006.</li>
          <li>BISHOP, Y. The Veterinary Formulary. London: Ed. Pharmaceutical Press, 2005.</li>
          <li>CENTER, S.A., et al. The effects of S-adenosylmethionine on clinical pathology and redox potential in the red blood cell, liver, and bile of clinically normal cats. J Vet Intern Med., v. 19, n.3, p.303-314, 2005.</li>
          <li>CORDAS, T. A; BARRETO, O. C. O. Intera√ß√µes Medicamentosas. S√£o Paulo: Ed. Lemos, 1998.</li>
          <li>DAUGSCHIES, A; et al. Toltrazuril treatment of cystoisosporosis in dogs under experimental and field conditions. Parasitol Res, v.86, n. 10, p. 797-799, 2000.</li>
          <li>DETHIOUX, F. A dermatite at√≥pica canina, um desafio para o cl√≠nico. Focus, edi√ß√£o especial, 5-53, 2006.</li>
          <li>DOMOSLAWSKA, A., et al. Oral folic acid supplementation decreases palate and/or lip cleft occurrence in Pug and Chihuahua puppies and elevates folic acid blood levels in pregnant bitches. Pol J Vet Sci., v. 16, n.1, p.33-37, 2013.</li>
          <li>FIECHTER, R., et al. Control of Giardia infections with ronidazole and intensive hygienemanagement in a dog kennel. Veterinary Parasitology, v. 187, n.1-2, p. 93-98, 2012.</li>
          <li>GAGNE J.W; et al. Effects of a synbiotic on fecal quality, short-chain fatty acid concentrations, and the microbiome of healthy sled dogs. BMC Veterinary Research. N. 9, p.246, 2013.</li>
          <li>GRZESKOWIAK, L; et al. Microbiota na probiotics in canine and feline welfare. Anaerobe, n. 34, p. 14-23, 2005.</li>
          <li>GRIESHOP, C.M; et al. Gastrointestinal and immunological responses of senior dogs to chicory and mannan-oligosaccharides. Archives of Animal Nutrition, v.58, p. 483-493, 2004.</li>
          <li>HANSON, P; et al. Efficacy and safety of firocoxib in the management of canine osteoarthritis under field conditions. Vet. Therap. V.7, n.2, p.127-140, 2006.</li>
          <li>KOLL√ÅR, R; et al. Architecture of the yeast cell 74 wall: Beta(1-&gt;6)-glucan interconnects mannoprotein, Beta(1-&gt;3)-glucan and chitin. The Journal of Biological Chemistry, v. 272, n.3, p. 1170-1178, 1995.</li>
          <li>MARSELLA, R., OLIVRY, T. The ACVD task force on canine atopic dermatitis (XXII). Nonsteroidal antiinflamatory pharmacotherapy. Veterinary Immunology and Immunopathology, 8, 2001.</li>
          <li>MEYER, D; et al. Use of ursodeoxycholic acids in a dog with chronic hepatitis: effects on serum hepatic tests and endogenous bile acid composition. Journal of Veterinary Internal Medicine, v. 11, n. 3, p. 195-197, 1997.</li>
          <li>NICHOLSON, B. T; et al. Effects of oral ursodeoxycholic acid in healthy cats on clinicopathological parameters, serum bile acids and light microscopic and ultrastructural features of the liver. Res. Vte. Sci, v. 61, n. 3, p. 258-262, 1996.</li>
          <li>NOGUEIRA, S.P.; et al. Dermatose responsiva √† biotina em c√£o. Ci√™ncia Rural, 40, 682-685, 2010.</li>
          <li>OLIVRY, T., MULLER, R. S. Evidence-based veterinary dermatology: a systematic review of the pharmacotherapy of canine atopic dermatitis. Veterinary Dermatology, 14, 121-146, 2003.</li>
          <li>PAPICH, M. G. Manual Saunders de Terapia Veterin√°ria: pequenos e grandes animais. 3 ed. Rio de Janeiro: Elsevier, 2012.</li>
          <li>PLUMB, D. C. Veterinary Drug Handbook. Ames: Ed. Lowa State Press, 2002.</li>
          <li>ROBSON, D. C; BURTON, G. G. Review - Cyclosporine: applications in small animal dermatology. Veterinary Dermatology, V. 14, n. 1, p. 1-9, 2003.</li>
          <li>ROUDEBUSH, P,; KEENE, B. W. Cardiovascular disease. In: HAND, M. S., et al. (Ed.) Small animal clinical nutrition, 5 ed. Topeka: Mark Morris Institute, 2010. p. 733-763.</li>
          <li>SCOTT, A. B., et al. Effects of the angiotensin converting enzyme inhibitor benazepril in cats with induced renal insufficiency. American Journal of Veterinary Research, v. 62, n.3, p.375-383, 2001.</li>
          <li>SCWARTZ, S. Canine and Feline Behavior Problems New York: Mosby, 1996.</li>
          <li>SILVA, L. P.; N√ñRNBERG, J.L. Prebi√≥ticos na nutri√ß√£o de n√£o ruminantes. Ci√™ncia Rural, v.33, n.5, p.983-990, 2003.</li>
          <li>SPINOSA, H. S; et al. Farmacologia aplicada √† medicina veterin√°ria. 5 ed. Rio de Janeiro: Guanabara Koogan, 2015.</li>
          <li>SWANSON, K. S; et al. Supplemental fructooligosaccharides and mannanoligosaccharides influence immune function, ileal and total tract nutrient digestibilities, microbial populations and concentrations of protein catabolites in the large bowel of dogs. Journal of Nutrition, v. 132, p.980-989, 2002.</li>
          <li>VIANA, F.A.B. Guia Terap√™utico Veterin√°rio. 2 ed. Belo Horizonte: Gr√°fica e Editora CEM Ltda, 2003.</li>
          <li>VIEIRA, F. C; PINHEIRO, V. A. Formul√°rio Veterin√°rio Farmac√™utico. S√£o Paulo: Ed. Pharmabooks, 2004.</li>
          <li>WEBB, C. B; et al. S-adenosylmethionine (SAMe) in a feline acetaminophen model of oxidative injury. Journal of Feline Medicine and Surgery, V.5, p.69-75, 2003.</li>
          <li>WYNN, S. G; FOUGERE, B. Veterinary Herbal Medicine. Sydney: Elsevier, 2007.</li>
          <li>YAZBEK, A. V. B; LARSSON, C. E. Evaluation of the clinical efficacy of cyclosporine in atopic dogs treatment. Braz J. Vet, v. 49, n.5, p.360-366, 2012.</li>
        </ul>
      <button class="btn" (click)="fecharModalReferencias()">Fechar</button>
    </div>
  </ng-container>
</div>

<!-- Modal de aviso -->
<div class="modal-aviso" *ngIf="modalAvisoAberto">
  <div class="modal-content">
    <h3>Sess√£o expirada</h3>
    <p>Seu token expirou ou √© inv√°lido. Voc√™ ser√° deslogado.</p>
    <button (click)="dismissLogout()">OK</button>
  </div>
</div>

