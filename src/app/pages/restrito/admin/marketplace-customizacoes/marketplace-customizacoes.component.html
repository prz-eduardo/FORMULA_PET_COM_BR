<div class="mk-wrapper">
  <div class="header">
    <div>
      <h2>Customizações do Marketplace</h2>
      <p class="sub">Gerencie categorias e tags usadas na vitrine e filtros.</p>
    </div>
    <div class="tools">
      <button class="btn ghost" (click)="load()" [disabled]="loading()">{{ loading() ? 'Atualizando…' : 'Atualizar' }}</button>
      <button class="btn primary" (click)="save()" [disabled]="saving()">{{ saving() ? 'Salvando...' : 'Salvar alterações' }}</button>
    </div>
  </div>

  <div class="grid">
    <section>
      <div class="section-head">
        <h3>Categorias</h3>
        <button class="btn" (click)="addCategoria()">+ Adicionar</button>
      </div>
      <div class="empty" *ngIf="!categorias.length">Nenhuma categoria ainda.</div>
      <div class="list" *ngIf="categorias.length">
        <div class="row" *ngFor="let c of categorias.controls; let i = index" [formGroup]="$any(c)">
          <div class="field small">
            <label>ID</label>
            <input type="text" formControlName="id" placeholder="novo" [disabled]="true" />
          </div>
          <div class="field grow">
            <label>Nome</label>
            <input type="text" formControlName="nome" placeholder="Ex.: Vitaminas" />
          </div>
          <div class="field">
            <label>Slug</label>
            <input type="text" formControlName="slug" placeholder="opcional" />
          </div>
          <div class="field">
            <label>Ícone</label>
            <input type="text" formControlName="icone" placeholder="mdi-..." />
          </div>
          <div class="field small center">
            <label>Remover</label>
            <input type="checkbox" formControlName="remove" />
          </div>
          <div class="field small center">
            <label>&nbsp;</label>
            <button type="button" class="btn danger" (click)="removeCategoria(i)">Excluir</button>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="section-head">
        <h3>Tags</h3>
        <button class="btn" (click)="addTag()">+ Adicionar</button>
      </div>
      <div class="empty" *ngIf="!tags.length">Nenhuma tag ainda.</div>
      <div class="list" *ngIf="tags.length">
        <div class="row" *ngFor="let t of tags.controls; let i = index" [formGroup]="$any(t)">
          <div class="field small">
            <label>ID</label>
            <input type="text" formControlName="id" placeholder="novo" [disabled]="true" />
          </div>
          <div class="field grow">
            <label>Nome</label>
            <input type="text" formControlName="nome" placeholder="Ex.: pet-idoso" />
          </div>
          <div class="field small center">
            <label>Remover</label>
            <input type="checkbox" formControlName="remove" />
          </div>
          <div class="field small center">
            <label>&nbsp;</label>
            <button type="button" class="btn danger" (click)="removeTag(i)">Excluir</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="feedback">
    <span class="ok" *ngIf="success()">{{ success() }}</span>
    <span class="err" *ngIf="error()">{{ error() }}</span>
  </div>
</div>
