/* Base layout */
.dash-layout{display:grid;grid-template-columns:240px 1fr;gap:16px;padding:16px;min-height:calc(100vh - 80px);background:#f3f4f6}
.sidebar{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:12px}
.sidebar .brand{font-weight:800;color:#111827}
.sidebar nav{display:flex;flex-direction:column;gap:6px}
.sidebar nav button{padding:8px 10px;border-radius:8px;border:1px solid #e5e7eb;background:#fff;text-align:left;cursor:pointer;transition:background .2s,border-color .2s,color .2s}
.sidebar nav button.active{background:#111827;color:#fff;border-color:#111827}
.sidebar .theme{margin-top:auto;display:flex;justify-content:space-between;align-items:center}
.content{display:flex;flex-direction:column;gap:16px}
.toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px}
.toolbar .filters{display:flex;align-items:center;gap:8px}
.toolbar input,.toolbar select{padding:6px 8px;border:1px solid #e5e7eb;border-radius:8px;background:#fff}
.head{display:flex;align-items:center;justify-content:space-between;gap:12px}
.head h1{margin:0;font-weight:700;font-size:22px}
.head .meta{display:flex;align-items:center;gap:8px}

/* Buttons */
.btn{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:8px;border:1px solid #e5e7eb;background:#fff;color:#111827;cursor:pointer;transition:background .2s,border-color .2s,color .2s,box-shadow .2s}
.btn:hover{background:#f9fafb}
.btn:active{transform:translateY(1px)}
.btn.refresh{background:#111827;color:#fff;border-color:#111827}
.btn.refresh:hover{background:#0b1220}
.btn.ghost{background:transparent;border-color:#e5e7eb;color:#374151}
.btn.ghost:hover{background:#f9fafb}

.kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}
.kpi{background:#111827;color:#fff;border-radius:10px;padding:12px;display:flex;flex-direction:column}
.kpi span{opacity:.7;font-size:12px}
.kpi strong{font-size:22px;line-height:1.2}

.charts.two{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.charts.three{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.charts.one{display:grid;grid-template-columns:1fr;gap:16px}
@media(max-width:1000px){.charts.two,.charts.three{grid-template-columns:1fr}}
@media(max-width:900px){.dash-layout{grid-template-columns:1fr}}
.panel{background:#fff;border-radius:12px;padding:12px;border:1px solid #e5e7eb;display:flex;flex-direction:column;gap:8px}
.panel h3{margin:0}
.chart-box{position:relative;height:280px}
.chart-box .empty{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:#6b7280}

.users,.grid-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.card{background:#fff;border-radius:12px;padding:12px;border:1px solid #e5e7eb}
.card h3{margin-top:0}
.card ul{margin:0;padding-left:16px}

.table-section{display:flex;flex-direction:column;gap:8px}
.table-wrap{overflow:auto;border:1px solid #e5e7eb;border-radius:12px;background:#fff}
.table-wrap.small{max-height:320px}
.table-wrap table{width:100%;border-collapse:collapse}
.table-wrap th,.table-wrap td{padding:8px;border-bottom:1px solid #f3f4f6;text-align:left}
.table-wrap thead th{position:sticky;top:0;background:#f9fafb;z-index:1}
.muted{margin-top:6px;color:#6b7280}

.loading{padding:48px;text-align:center;color:#6b7280}
.loading-overlay{position:fixed;inset:0;background:rgba(255,255,255,.7);backdrop-filter:saturate(120%) blur(2px);display:flex;align-items:center;justify-content:center;z-index:9999}
.loading-overlay .loader{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px 20px;box-shadow:0 10px 30px rgba(0,0,0,.2);display:flex;flex-direction:column;align-items:center;gap:10px;color:#111827}
.loading-overlay .spinner{width:28px;height:28px;border:3px solid #e5e7eb;border-top-color:#2563eb;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.error{padding:10px;border-radius:8px;background:#fee2e2;color:#991b1b}

.toggles{display:flex;flex-wrap:wrap;gap:10px;padding:8px 12px;background:#fff;border:1px solid #e5e7eb;border-radius:12px}
.toggles label{display:flex;align-items:center;gap:6px;font-size:13px;color:#374151}

.map-wrap{display:flex;flex-direction:column;gap:10px}
.map-grid{display:flex;flex-direction:column;gap:6px}
.map-grid .row{display:flex;gap:6px;justify-content:center}
.tile{width:56px;height:56px;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#0f172a;border:1px solid #e5e7eb;box-shadow:inset 0 0 0 1px rgba(255,255,255,.3)}
.tile .uf{font-weight:700;font-size:12px}
.tile .val{font-size:12px}
.legend{display:flex;align-items:center;gap:8px}
.legend .bar{height:10px;width:160px;background:linear-gradient(90deg,#dbeafe,#2563eb);border-radius:5px;border:1px solid #e5e7eb}

/* Dark theme using host-context on documentElement[data-theme="dark"] */
:host-context([data-theme="dark"]) .dash-layout{background:#0b1220}
:host-context([data-theme="dark"]) .sidebar{background:#0f172a;border-color:#1f2937;color:#e5e7eb}
:host-context([data-theme="dark"]) .sidebar .brand{color:#e5e7eb}
:host-context([data-theme="dark"]) .sidebar nav button{background:#0f172a;border-color:#1f2937;color:#e5e7eb}
:host-context([data-theme="dark"]) .sidebar nav button.active{background:#111827;border-color:#111827;color:#e5e7eb}
:host-context([data-theme="dark"]) .content{color:#e5e7eb}
:host-context([data-theme="dark"]) .panel{background:#0f172a;border-color:#1f2937;color:#e5e7eb}
:host-context([data-theme="dark"]) .kpi{background:#111827;color:#e5e7eb}
:host-context([data-theme="dark"]) .toolbar input,
:host-context([data-theme="dark"]) .toolbar select{background:#0b1220;border-color:#1f2937;color:#e5e7eb}
:host-context([data-theme="dark"]) .table-wrap{background:#0f172a;border-color:#1f2937}
:host-context([data-theme="dark"]) .table-wrap thead th{background:#0b1220}
:host-context([data-theme="dark"]) .legend .bar{border-color:#1f2937}
:host-context([data-theme="dark"]) .btn{background:#0f172a;border-color:#1f2937;color:#e5e7eb}
:host-context([data-theme="dark"]) .btn:hover{background:#111827}
:host-context([data-theme="dark"]) .btn:active{transform:translateY(1px)}
// card
:host-context([data-theme="dark"]) .card{background:#0f172a;border-color:#1f2937;color:#e5e7eb}
:host-context([data-theme="dark"]) .btn.refresh{background:#111827;border-color:#111827;color:#e5e7eb}
:host-context([data-theme="dark"]) .btn.ghost{background:transparent;border-color:#1f2937;color:#cbd5e1}
/* Dark variant for loading overlay */
:host-context([data-theme="dark"]) .loading-overlay{background:rgba(0,0,0,.45)}
:host-context([data-theme="dark"]) .loading-overlay .loader{background:#0f172a;border-color:#1f2937;color:#e5e7eb}
:host-context([data-theme="dark"]) .loading-overlay .spinner{border-color:#1f2937;border-top-color:#60a5fa}
